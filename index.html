<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
 </head>
 <body>
  <div>
   <div id="productos-landings">
    <template v-for="(product, index) in products" :key="index">
     <img v-bind:src=`https://www.pcfactory.cl/${product.thumbnail}` alt="" />
     <h1 class="my-5">{{product.nombre}}</h1>
     <p>id: {{product.id}}</p>
    </template>
   </div>
  </div>
  <script
   src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.2/axios.js"
   integrity="sha512-JwcZ6ApNnuNMW/djB3vPh2HpDRq4HkNE4pckP9uNhTyEW6V5NhspLu3T6ciFSz//J4sMMwtzxW5Tg+D/Ptx00w=="
   crossorigin="anonymous"
   referrerpolicy="no-referrer"
  ></script>
  <script src="vue.js"></script>

  <script>
   new Vue({
    el: "#productos-landings",
    data: function () {
     return {
      datasources: [],
      products: [],
     };
    },
    methods: {
     consumingDataSources: function () {
      axios
       .get(
        "https://stoplight.io/mocks/modyo/pcfactory-documentation/79796109/campanas/navidad"
       )
       .then((response) => {
        let datas = response.data;
        for (let i = 0; i < datas.length; i++) {
         this.datasources = datas[i].dataSource;
         /* console.log(this.datasources); */
         axios
          .get(
           `https://stoplight.io/mocks/modyo/pcfactory-documentation/79796109/campanas/navidad/${this.datasources[i]}`
          )
          .then((response) => {
           let productsResponse = response.data.content.items;
           for (let j = 0; j < productsResponse.length; j++) {
            this.products.push(productsResponse[i]);
           }
          });
        }
       })
       .catch((e) => {
        console.log(e);
       });
     },
     consumingProducFromDatas: function () {},
    },

    created: function () {
     this.consumingDataSources();
     this.consumingProducFromDatas();
    },
    mounted: function () {
     /* console.log(this.products); */
    },
   });
  </script>
 </body>
</html>
